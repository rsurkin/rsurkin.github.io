{"version":3,"sources":["Game15/GameView/TilesContainer.js","Game15/GameView/Tile.js","Game15/GameView/index.js","Game15/actions/index.js","Game15/reducers/game15.js","Game15/reducers/index.js","Game15/store.js","Game15/config/FontAwesome.js","index.js","Game15/index.js"],"names":["TilesContainer","_ref","tiles","children","react_default","a","createElement","className","Tile","label","id","onClick","data-id","connect","game15","_game15$tiles","_game15$undoAvailable","undoAvailable","_game15$redoAvailable","redoAvailable","_game15$restoreAvaila","restoreAvailable","dispatch","startNewGame","type","handleStartNewGame","e","preventDefault","stopPropagation","handleUndo","handleRedo","handleTileClick","target","dataset","moveTileAction","handleSave","handleRestore","props","length","href","disabled","index_es","icon","map","key","save","localStorage","setItem","JSON","stringify","Object","objectSpread","restore","newGame15","parse","getItem","undo","redo","undoStack","stackPointer","nextStackPointer","toConsumableArray","moveTile","moveAvailable","positionOfZero","indexOf","positionOfElement","newTiles","nextUndoStack","concat","slice","createNewGame","Array","keys","sort","Math","random","b","reducers","combineReducers","arguments","undefined","store","createStore","rootReducer","library","add","faUndo","faRedo","faSave","faFileUpload","ReactDOM","render","es","Game15_GameView","document","getElementById"],"mappings":"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","file":"static/js/main.4fbf7f0c.chunk.js","sourcesContent":["import React from 'react'\r\nimport './style.css'\r\n\r\nexport default ({children:tiles}) => (\r\n  <div className={`field`}>\r\n    {tiles}\r\n  </div>\r\n)","import React from 'react'\r\nimport './style.css'\r\n\r\nexport default ({label, id, onClick}) => (\r\n  <div className={`tile`} onClick={onClick} data-id={id}>\r\n    {label === 0 ? ` ` : label}\r\n  </div>\r\n)","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport TilesContainer from './TilesContainer';\r\nimport Tile from './Tile';\r\nimport {\r\n  moveTileAction,\r\n  startNewGameAction,\r\n  undoAction,\r\n  redoAction,\r\n  saveAction,\r\n  restoreAction,\r\n} from '../actions';\r\n\r\nconst GameView = (props) => {\r\n  const {\r\n    handleTileClick,\r\n    tiles,\r\n    startNewGame,\r\n    handleStartNewGame,\r\n    undoAvailable,\r\n    handleUndo,\r\n    redoAvailable,\r\n    handleRedo,\r\n    handleSave,\r\n    restoreAvailable,\r\n    handleRestore,\r\n  } = props;\r\n\r\n  if (!tiles.length) {\r\n    startNewGame();\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <a href=\"#\" className={`btn`} onClick={handleStartNewGame}>Start new game</a>\r\n\r\n      <div className={`actionBtns`}>\r\n        <a href=\"#\" className={`btn`} onClick={handleUndo} disabled={!undoAvailable}>\r\n          <FontAwesomeIcon icon=\"undo\" />\r\n        </a>\r\n        <a href=\"#\" className={`btn`} onClick={handleRedo} disabled={!redoAvailable}>\r\n          <FontAwesomeIcon icon=\"redo\" />\r\n        </a>\r\n        <a href=\"#\" className={`btn`} onClick={handleSave}>\r\n          <FontAwesomeIcon icon=\"save\" />\r\n        </a>\r\n        <a href=\"#\" className={`btn`} onClick={handleRestore} disabled={!restoreAvailable}>\r\n          <FontAwesomeIcon icon=\"file-upload\" />\r\n        </a>\r\n      </div>\r\n\r\n      <TilesContainer>\r\n        {tiles.map(\r\n          (id) => (<Tile\r\n            key={id}\r\n            label={id}\r\n            id={id}\r\n            onClick={handleTileClick}\r\n          />)\r\n        )}\r\n      </TilesContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  ({game15}) => {\r\n    const {\r\n      tiles = [],\r\n      undoAvailable = false,\r\n      redoAvailable = false,\r\n      restoreAvailable = false,\r\n    } = game15;\r\n\r\n    return {\r\n      tiles,\r\n      undoAvailable,\r\n      redoAvailable,\r\n      restoreAvailable,\r\n    }\r\n  },\r\n  (dispatch) => ({\r\n    startNewGame: () => {\r\n      dispatch(startNewGameAction());\r\n    },\r\n    handleStartNewGame: (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      dispatch(startNewGameAction());\r\n    },\r\n    handleUndo: (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      dispatch(undoAction());\r\n    },\r\n    handleRedo: (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      dispatch(redoAction());\r\n    },\r\n    handleTileClick: (e) => {\r\n      const id = +e.target.dataset.id;\r\n\r\n      dispatch(\r\n        moveTileAction(id)\r\n      );\r\n    },\r\n    handleSave: (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      dispatch(saveAction());\r\n    },\r\n    handleRestore: (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n\r\n      dispatch(restoreAction());\r\n    },\r\n  })\r\n)(GameView);","export const startNewGameAction = () => ({\r\n  type: 'NEW_GAME',\r\n});\r\n\r\nexport const undoAction = () => ({\r\n  type: 'UNDO',\r\n});\r\n\r\nexport const redoAction = () => ({\r\n  type: 'REDO',\r\n});\r\n\r\nexport const moveTileAction = (id) => ({\r\n  type: 'MOVE_TILE',\r\n  id: id,\r\n});\r\n\r\nexport const saveAction = () => ({\r\n  type: 'SAVE',\r\n});\r\n\r\nexport const restoreAction = () => ({\r\n  type: 'RESTORE',\r\n});","export default (game15 = {}, {type, id}) => {\r\n  switch (type) {\r\n    case 'MOVE_TILE':\r\n      return moveTile(game15, id);\r\n    case 'NEW_GAME':\r\n      return createNewGame();\r\n    case 'UNDO':\r\n      return undo(game15, false);\r\n    case 'REDO':\r\n      return undo(game15, true);\r\n    case 'SAVE':\r\n      return save(game15);\r\n    case 'RESTORE':\r\n      return restore();\r\n    default:\r\n      return game15;\r\n  }\r\n}\r\n\r\nconst GAME_SAVE_KEY = `game15save`\r\n\r\nconst save = (game15) => {\r\n  localStorage.setItem(\r\n    GAME_SAVE_KEY,\r\n    JSON.stringify(game15)\r\n  );\r\n\r\n  return {\r\n    ...game15,\r\n    restoreAvailable: true\r\n  }\r\n}\r\n\r\nconst restore = () => {\r\n  // в идеале какую то схему, котороая провалидирует JSON, но я себе доверяю\r\n  const newGame15 = JSON.parse(\r\n    localStorage.getItem(GAME_SAVE_KEY)\r\n  );\r\n\r\n  return {\r\n    ...newGame15\r\n  };\r\n}\r\n\r\nconst undo = (game15, redo) => {\r\n  const {\r\n    undoStack,\r\n    stackPointer,\r\n    restoreAvailable,\r\n  } = game15;\r\n\r\n  const direction = redo ? +1 : -1;\r\n  const nextStackPointer = stackPointer + direction;\r\n\r\n  if (!undoStack[nextStackPointer]) {\r\n    return game15;\r\n  }\r\n\r\n  const tiles = [\r\n    ...undoStack[nextStackPointer]\r\n  ];\r\n\r\n  return {\r\n    restoreAvailable: restoreAvailable,\r\n    tiles: tiles,\r\n    undoStack: [...undoStack],\r\n    stackPointer: nextStackPointer,\r\n    undoAvailable: nextStackPointer > 0,\r\n    redoAvailable: nextStackPointer < undoStack.length - 1,\r\n  }\r\n};\r\n\r\nconst moveTile = (game15, id) => {\r\n  const {\r\n    tiles,\r\n    undoStack,\r\n    stackPointer,\r\n    restoreAvailable,\r\n  } = game15;\r\n  if (!moveAvailable(tiles, id)) {\r\n    return game15;\r\n  }\r\n\r\n  const positionOfZero = tiles.indexOf(0);\r\n  const positionOfElement = tiles.indexOf(id);\r\n\r\n  const newTiles = [\r\n    ...tiles\r\n  ];\r\n\r\n  newTiles[positionOfZero] = id;\r\n  newTiles[positionOfElement] = 0;\r\n\r\n  const nextUndoStack = [\r\n    ...undoStack.slice(0, stackPointer + 1),\r\n    newTiles,\r\n  ];\r\n\r\n  return {\r\n    restoreAvailable: restoreAvailable,\r\n    undoStack: nextUndoStack,\r\n    undoAvailable: true,\r\n    redoAvailable: false,\r\n    stackPointer: nextUndoStack.length - 1,\r\n    tiles: newTiles,\r\n  };\r\n};\r\n\r\nconst moveAvailable = (tiles, id) => {\r\n  const positionOfZero = tiles.indexOf(0);\r\n  const positionOfElement = tiles.indexOf(id);\r\n\r\n  return (\r\n    positionOfElement + 1 === positionOfZero\r\n    || positionOfElement - 1 === positionOfZero\r\n    || positionOfElement - 1 === positionOfZero\r\n    || positionOfElement - 4 === positionOfZero\r\n    || positionOfElement + 4 === positionOfZero\r\n  )\r\n};\r\n\r\nconst createNewGame = () => {\r\n  const tiles = [\r\n    ...Array(16).keys()\r\n  ]\r\n    .sort(() => Math.random() - 0.5)\r\n    .sort((a, b) => b === 0 ? -1 : 0)\r\n    ;\r\n\r\n  return {\r\n    // за рамками задачи, выделить, ф-ию isRestore available, и зануть это в другой файл\r\n    restoreAvailable: localStorage.getItem(GAME_SAVE_KEY) !== null,\r\n    undoStack: [\r\n      tiles\r\n    ],\r\n    undoAvailable: false,\r\n    redoAvailable: false,\r\n    stackPointer: 0,\r\n    tiles: tiles,\r\n  }\r\n};","import {combineReducers} from 'redux';\r\nimport game15 from './game15'\r\n\r\nconst reducers = combineReducers({\r\n  game15\r\n});\r\n\r\nexport default reducers;","import {createStore} from 'redux';\r\nimport rootReducer from './reducers'\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;\r\n","import { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { \r\n  faUndo, \r\n  faRedo,\r\n  faSave,\r\n  faFileUpload,\r\n} from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport default () => {\r\n  library.add(faUndo);\r\n  library.add(faRedo);\r\n  library.add(faSave);\r\n  library.add(faFileUpload);\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game15 from './Game15';\n\nReactDOM.render(<Game15 />, document.getElementById('root'));\n","import React from 'react';\r\nimport {Provider} from 'react-redux';\r\nimport GameView from './GameView';\r\nimport store from './store';\r\nimport configFontAwesome from './config/FontAwesome';\r\n\r\nconfigFontAwesome();\r\n\r\n// вообще, стор лучше уровнем выше заинить, если у меня будет еще что то\r\nexport default () => (\r\n  <Provider store={store}>\r\n    <GameView />\r\n  </Provider>\r\n)"],"sourceRoot":""}